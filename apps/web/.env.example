# ╔═══════════════════════════════════════════════════════════════════╗
# ║  CONFIGURATION — Epicerie Africaine                              ║
# ║                                                                   ║
# ║  1. Copier ce fichier :  cp .env.example .env.local               ║
# ║  2. Remplir les valeurs ci-dessous dans .env.local                ║
# ║  3. Ne JAMAIS commiter .env.local (il est dans .gitignore)        ║
# ║                                                                   ║
# ║  Les services marqués (Optionnel) ne bloquent pas le lancement.   ║
# ║  L'app fonctionne en mode dégradé sans eux (mock data, etc.).     ║
# ╚═══════════════════════════════════════════════════════════════════╝


# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# SANITY — CMS (catalogue produits)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#
# Sanity gère le catalogue produits (noms, prix, images, catégories).
# Sans Sanity configuré, l'app affiche des produits mock.
#
# ÉTAPES :
#   1. Créer un compte gratuit sur https://www.sanity.io
#   2. Créer un nouveau projet (ou utiliser celui dans apps/studio/)
#   3. Dans le dashboard Sanity : https://www.sanity.io/manage
#      → Cliquer sur votre projet
#      → L'ID du projet est affiché en haut (ex: "abc123xy")
#   4. Pour le token API :
#      → Dashboard > API > Tokens > Add API token
#      → Nom : "Next.js" | Permissions : "Editor"
#      → Copier le token généré (il ne sera plus visible après)
#
NEXT_PUBLIC_SANITY_PROJECT_ID=
# Dataset : laisser "production" (c'est le défaut de Sanity)
NEXT_PUBLIC_SANITY_DATASET=production
# Version API : ne pas modifier sauf besoin spécifique
NEXT_PUBLIC_SANITY_API_VERSION=2024-01-01
# Token API avec droits d'écriture (pour le seed et les mutations)
# Laisser vide si vous utilisez uniquement le mode lecture
SANITY_API_TOKEN=


# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# SUPABASE — Auth + Base de données
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#
# Supabase gère : l'authentification (inscription/connexion),
# les profils utilisateur, les paniers persistants, les commandes,
# et les points de fidélité.
# Sans Supabase, l'app fonctionne en mode invité uniquement
# (panier localStorage, pas de compte utilisateur).
#
# ÉTAPES :
#   1. Créer un compte gratuit sur https://supabase.com
#   2. Cliquer "New Project"
#      → Nom : par ex. "epicerie-africaine"
#      → Mot de passe DB : choisir un mot de passe fort (le noter !)
#      → Région : choisir la plus proche (ex: "East US" ou "Central Canada")
#      → Cliquer "Create new project" et attendre ~2 minutes
#
#   3. Récupérer les clés API :
#      → Dans le dashboard, aller dans : Settings > API
#      → Ou cliquer sur l'icône engrenage dans la sidebar gauche > API
#
#      ┌──────────────────────────────────────────────────────────┐
#      │ Project URL                                              │
#      │ https://abcdefghijk.supabase.co          [Copy]          │
#      │                                                          │
#      │ Project API keys                                         │
#      │ anon public    eyJhbGciOi...              [Copy]         │
#      │ service_role   eyJhbGciOi...              [Copy]         │
#      └──────────────────────────────────────────────────────────┘
#
#      → "Project URL" = NEXT_PUBLIC_SUPABASE_URL
#      → "anon public" = NEXT_PUBLIC_SUPABASE_ANON_KEY
#      → "service_role" = SUPABASE_SERVICE_ROLE_KEY
#
#      ATTENTION : la clé service_role est SECRÈTE. Elle bypass
#      toutes les règles de sécurité (RLS). Ne jamais l'exposer
#      côté client ou la commiter dans git.
#
#   4. Créer les tables (une seule commande) :
#      → Dashboard > SQL Editor (icône terminal dans la sidebar)
#      → Cliquer "New Query"
#      → Copier-coller TOUT le contenu du fichier :
#        supabase/migrations/all.sql
#      → Cliquer "Run" (ou Ctrl+Enter)
#      → Vous devriez voir "Success. No rows returned."
#      → Ça crée : 6 tables, 14 policies de sécurité, 7 indexes,
#        1 trigger (auto-profil), 1 fonction (fidélité)
#
#   5. Configurer l'authentification :
#      → Dashboard > Authentication (icône cadenas dans la sidebar)
#      → Aller dans "URL Configuration" (menu de gauche)
#      → Site URL : http://localhost:3007
#      → Redirect URLs : cliquer "Add URL" puis entrer :
#        http://localhost:3007/auth/callback
#
#      (En production, remplacer localhost:3007 par votre domaine)
#
#   6. (Optionnel) Désactiver la confirmation email pour le dev :
#      → Authentication > Providers > Email
#      → Décocher "Confirm email"
#      → Ça permet de tester sans vérifier ses mails
#
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=


# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# STRIPE — Paiement en ligne
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#
# Stripe gère le paiement (Checkout Sessions).
# Sans Stripe configuré, le bouton "Payer" ne fonctionnera pas.
#
# ÉTAPES :
#   1. Créer un compte sur https://dashboard.stripe.com/register
#      (pas besoin de vérifier son identité pour le mode test)
#
#   2. Vérifier que vous êtes en MODE TEST :
#      → En haut à droite du dashboard, le toggle "Test mode"
#        doit être activé (orange)
#
#   3. Récupérer les clés API :
#      → Dashboard > Developers > API keys
#      → Ou directement : https://dashboard.stripe.com/test/apikeys
#
#      ┌──────────────────────────────────────────────────────────┐
#      │ Publishable key    pk_test_51abc...          [Copy]      │
#      │ Secret key         sk_test_51abc...   [Reveal] [Copy]    │
#      └──────────────────────────────────────────────────────────┘
#
#      → "Publishable key" = NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY
#      → "Secret key" = STRIPE_SECRET_KEY
#
#   4. Configurer le webhook (pour recevoir les confirmations de paiement) :
#
#      OPTION A — Stripe CLI (recommandé pour le développement local) :
#
#        a) Installer Stripe CLI :
#           Windows : scoop install stripe
#           Mac     : brew install stripe/stripe-cli/stripe
#           Linux   : voir https://docs.stripe.com/stripe-cli
#
#        b) Se connecter :
#           stripe login
#           → Un navigateur s'ouvre, cliquer "Allow access"
#
#        c) Écouter les webhooks en local :
#           stripe listen --forward-to localhost:3007/api/webhook/stripe
#
#           → La commande affiche :
#             "Ready! Your webhook signing secret is whsec_abc123..."
#           → Copier ce whsec_... dans STRIPE_WEBHOOK_SECRET ci-dessous
#
#        d) Laisser cette commande tourner dans un terminal séparé
#           pendant le développement.
#
#      OPTION B — Dashboard (pour la production) :
#        → Developers > Webhooks > Add endpoint
#        → URL : https://votre-domaine.com/api/webhook/stripe
#        → Events : checkout.session.completed
#        → Copier le "Signing secret" dans STRIPE_WEBHOOK_SECRET
#
#   5. Tester un paiement :
#      → Carte de test : 4242 4242 4242 4242
#      → Date exp : 12/34 (n'importe quelle date future)
#      → CVC : 123 (n'importe quel chiffre)
#      → Le paiement sera simulé (aucun vrai débit)
#
STRIPE_SECRET_KEY=
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=
STRIPE_WEBHOOK_SECRET=


# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# CAL.COM — Prise de rendez-vous (Optionnel)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#
# Cal.com permet aux clients de prendre rendez-vous en ligne
# (consultation, visite en boutique, etc.).
# Sans cette variable, la page /appointments affiche un fallback.
#
# ÉTAPES :
#   1. Créer un compte gratuit sur https://cal.com
#   2. Créer un "Event Type" (ex: "Consultation en boutique")
#      → Settings > Event Types > New
#      → Configurer la durée, les disponibilités, etc.
#   3. Récupérer l'URL de l'event :
#      → Le format est : votre-username/nom-event
#      → Exemple : "epicerie-africaine/consultation"
#      → On le trouve dans Event Types > cliquer sur l'event > l'URL en haut
#
NEXT_PUBLIC_CALCOM_EMBED_URL=


# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# APP — Configuration générale
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#
# NEXT_PUBLIC_BASE_URL :
#   URL de base de l'application.
#   - Dev local : http://localhost:3007
#   - Production : https://votre-domaine.com
#   Utilisé pour les redirections Stripe, les liens dans les emails, etc.
#
# NEXT_PUBLIC_SITE_NAME :
#   Nom affiché dans le header, les metadata SEO, les emails, etc.
#
NEXT_PUBLIC_BASE_URL=http://localhost:3007
NEXT_PUBLIC_SITE_NAME=Epicerie Africaine


# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# LIVRAISON — Frais et seuil gratuit
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#
# NEXT_PUBLIC_SHIPPING_COST :
#   Frais de livraison en dollars (ex: 5.99 = 5,99 $).
#   Appliqué automatiquement au checkout si le mode est "livraison".
#
# NEXT_PUBLIC_FREE_SHIPPING_THRESHOLD :
#   Montant minimum (en $) pour la livraison gratuite.
#   Ex: 75 = livraison gratuite dès 75 $ d'achat.
#
NEXT_PUBLIC_SHIPPING_COST=5.99
NEXT_PUBLIC_FREE_SHIPPING_THRESHOLD=75
